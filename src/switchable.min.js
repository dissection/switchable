"use strict";!function(e,t){function n(t){return this.each(function(){new a(e(this),t)})}var a=function(t,n){var i,s=this,o=!0;if(s.el=e(t),i=s.options=e.extend({},a.DEFAULTS,n||{}),s.addClassfnc(),i.visible<i.step&&(i.visible=i.step),s.nav=s.el.find("."+i.navItem),s.main=s.el.find("."+i.mainClass),i.step=Math.max(i.step||1,1),s.len=s.main.size(),s.content=s.el.find("."+i.contentClass),s.mainWidth=s.main.outerWidth(i.includeMargin),s.mainHeight=s.main.outerHeight(i.includeMargin),o=i.step<s.len,"tab"==i.type&&i.navSelectedClass&&s.nav.length>0){var l=-1;s.nav.each(function(t){var n=e(this);n.hasClass(i.navSelectedClass)&&(-1==l?l=t:n.removeClass(i.navSelectedClass))}),l>-1&&(i.defaultPanel=l)}if(i.isPingtung&&(i.width=e(window).width()),i.width&&(s.mainWidth=i.width),s.mainHeight=s.main.outerHeight(i.includeMargin),i.height&&(s.mainHeight=i.height),s.cloneCount=i.visible,i.seamlessLoop&&o){for(var c=[],r=[],p=s.cloneCount,u=0;p>u;u++)c.push(s.main.eq(u).clone().attr("data-switchable-clone",p+u).data("switchable-clone-from",p+u)),r.push(s.main.eq(s.len-(u+1)).clone().attr("data-switchable-clone",s.len+u).data("switchable-clone-from",s.len+u));for(var h=0;p>h;h++)s.content.prepend(r[h]).append(c[h]);s.main=s.el.find("."+i.mainClass)}s.main.each(function(t){e(this).data("switchable-idx",t)});var d=i.defaultPanel;s.last=d,s.current=d,s.isInit=!0,i.seamlessLoop&&o?s.switchTo(d,d+s.cloneCount):s.switchTo(d,d),s.autoInterval=null,s.eventTimer=null,o&&(s.autoPlay(),s.eventBind())};a.VERSION="1.0.0",a.DEFAULTS={type:"tab",direction:"left",contentClass:"ui-switchable-panel-main",mainClass:"ui-switchable-panel",mainSelectedClass:"ui-switchable-panel-selected",navItem:"ui-switchable-item",navSelectedClass:"ui-switchable-selected",prevClass:"ui-switchable-prev",nextClass:"ui-switchable-next",contentPage:"ui-switchable-page",contentPageIsConceal:!1,isAutoPlay:!1,mouseenterStopPlay:!0,playDirection:"next",event:"mouseover",speed:400,delay:150,defaultPanel:0,stayTime:5e3,includeMargin:!1,width:0,height:0,step:1,seamlessLoop:!1,visible:1,easing:"swing",hasSetup:!1,hasArrow:!1,arrowClass:"ui-switchable-arrow",navIframe:"data-iframe",callback:null,onNext:null,onPrev:null},a.prototype.addClassfnc=function(){},a.prototype.eventBind=function(){var t=this,n=t.options;t.nav.each(function(a){var i=e(this);i.on(n.event,function(){e(this);clearInterval(t.autoInterval),0===n.delay?(t.current=a,t.switchTo(a,n.seamlessLoop?a+t.cloneCount:a)):(clearTimeout(t.eventTimer),t.eventTimer=setTimeout(function(){t.current=a,t.switchTo(a,n.seamlessLoop?a+t.cloneCount:a)},n.delay))}).on("mouseleave",function(){clearTimeout(t.eventTimer),n.mouseenterStopPlay||t.autoPlay()})}),t.el.on("mouseenter",function(){n.contentPageIsConceal&&e("."+n.contentPage).show(),n.mouseenterStopPlay&&clearInterval(t.autoInterval)}).on("mouseleave",function(){n.contentPageIsConceal&&e("."+n.contentPage).hide(),n.mouseenterStopPlay&&t.autoPlay()}),t.page()},a.prototype.switchTo=function(e,t){var n=this;n.options;"undefined"==typeof e||"undefined"==typeof t||(n.switchNavTo(e),n.switchMainTo(t))},a.prototype.switchNavTo=function(e){var t=this,n=t.options;t.nav.removeClass(n.navSelectedClass),t.nav.eq(e).addClass(n.navSelectedClass)},a.prototype.switchMainTo=function(t){var n=this,a=n.options;if(n.iframefnc(t),n.main.removeClass(a.mainSelectedClass),n.main.eq(t).addClass(a.mainSelectedClass),n.isInit||n.last!=t){if(n.switchType(t),null!=a.callback){var i=t,s=n.main.eq(i),o=n.nav.eq(i);a.seamlessLoop&&n.main.each(function(){return i==e(this).data("switchable-clone-from")?(e(this).replaceWith(s.clone()),!1):void 0}),a.callback.call(n,t,o,s)}n.last=t}},a.prototype.switchType=function(e){var t=this,n=t.options;switch(n.type){case"tab":t.tab(e);break;case"focus":t.focus(e);break;case"slider":t.slider(e)}},a.prototype.switchDefault=function(e){var t=this;t.main.hide(),t.main.eq(e).show()},a.prototype.tab=function(e){var t=this,n=t.options;if(n.hasSetup||t.switchDefault(e),n.hasArrow){var a=n.arrowClass,i=t.nav.eq(e).outerWidth(!0)*e;if(t.isInit){var s=t.nav.parent().parent();s.prepend('<div class="'+a+'"><b></b></div>').css({position:"relative"}),t.el.find("."+a).css({left:i}),t.isPlayLock=!1}else setTimeout(function(){t.isPlayLock=!1},n.speed),t.el.find("."+a).stop(!0).animate({left:i},n.speed,n.easing)}t.isInit=!1},a.prototype.focus=function(t){var n=this,a=n.options;n.isInit?(n.main.parent().css({position:"relative"}),n.main.css({position:"absolute",zIndex:0,opacity:0}).show(),n.main.eq(t).css({zIndex:1,opacity:1}),a.isPlayLock=!1):(setTimeout(function(){a.isPlayLock=!1},a.speed),n.main.eq(n.last).css({zIndex:0}).stop(!0).animate({opacity:1},a.speed,a.easing,function(){e(this).css("opacity",0)})),n.main.eq(t).css({zIndex:1}).stop(!0).animate({opacity:1},a.speed,a.easing),n.isInit=!1},a.prototype.slider=function(e){var t=this,n=t.options,a=t.mainWidth,i=t.mainHeight,s=t.content,o=a*e,l=i*e;t.isInit?("left"==n.direction?(t.main.css({"float":"left",width:a}),s.css(n.seamlessLoop?{width:a*(t.len+2*t.cloneCount)}:{width:a*t.len}),s.css({left:-o})):"top"==n.direction&&s.css({top:-l}),s.parent().css({position:"relative"}),s.css({position:"absolute"}),t.isInit=!1,n.isPlayLock=!1):(setTimeout(function(){n.isPlayLock=!1},n.speed),"left"==n.direction?s.stop(!0).animate({left:-o},n.speed,n.easing):"top"==n.direction&&s.stop(!0).animate({top:-l},n.speed,n.easing))},a.prototype.carousel=function(){},a.prototype.page=function(){var e=this,t=e.options,n=e.el.find("."+t.prevClass),a=e.el.find("."+t.nextClass);n.on("click",function(n){t.isPlayLock&&e.content&&e.content.length>0||(t.isPlayLock=!0,e.prev(),n.stopPropagation())}),a.on("click",function(n){t.isPlayLock&&e.content&&e.content.length>0||(t.isPlayLock=!0,e.next(),n.stopPropagation())})},a.prototype.next=function(){var t=this,n=t.options;t.current=t.current+n.step,t.offsetIndex();var a=0;!n.seamlessLoop&&(a=-n.visible+n.step),t.current>=t.len+a&&(t.current=0);var i=n.visible;!n.seamlessLoop&&t.current+i>t.len&&(t.current=t.len>i?t.len-i:0);var s=n.seamlessLoop?t.current+t.cloneCount:t.current;t.switchTo(t.current,s),e.isFunction(n.onNext)&&n.onNext.call(t)},a.prototype.prev=function(){var t=this,n=t.options;n.seamlessLoop?t.offsetIndex(!0):(t.current-=n.step,t.current<0&&(t.current=t.current>-n.step?0:t.len-n.visible));var a=n.seamlessLoop?t.current+t.cloneCount:t.current;t.switchTo(t.current,a),e.isFunction(n.onPrev)&&n.onPrev.call(t)},a.prototype.offsetIndex=function(e){var t=this,n=t.content,a=t.options,i=t.mainWidth,s=t.mainHeight,o=null,l=null,c=null;e&&a.seamlessLoop?(c=t.current,t.current<=0?(c=t.len-a.step+t.current,o=-((t.len+(t.cloneCount+t.current))*i),l=-((t.len+(t.cloneCount+t.current))*s)):c-=a.step,t.current=c):t.current>=t.len&&a.seamlessLoop&&(c=t.current-t.len,o=-((c+t.cloneCount-a.step)*i),l=-((c+t.cloneCount-a.step)*s),t.current=c),null!=o&&"left"==a.direction?n.css({left:o}):null!=l&&"top"==a.direction&&n.css({top:l})},a.prototype.autoPlay=function(){var e=this;e.options.isAutoPlay&&e.startPlay()},a.prototype.startPlay=function(){var e=this,t=e.options;e.stopPlay(),e.autoInterval=setInterval(function(){e.main.length<=t.step?e.stopPlay():"prev"==t.playDirection?e.prev():e.next()},t.stayTime)},a.prototype.stopPlay=function(){var e=this;clearInterval(e.autoInterval)},a.prototype.iframefnc=function(e){var t=this,n=t.options,a=t.main.eq(e),i=t.nav.eq(n.seamlessLoop?e-t.cloneCount:e),s=i.attr(n.navIframe);if(s){var o=document.createElement("iframe");o.src=s,o.border=0,o.frameborder="no",o.marginwidth=0,o.marginheight=0,a.html(o),i.removeAttr(n.navIframe)}},e.fn.switchable=n,e.fn.switchable.Constructor=a}(jQuery);